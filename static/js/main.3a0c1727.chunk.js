(this["webpackJsonpfinancial-planner"]=this["webpackJsonpfinancial-planner"]||[]).push([[0],{123:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),i=a.n(c),o=(a(123),a(14)),s=a(64),u=function(){return Object(s.b)()},l=s.c,d=a(42),b=a(56),j=Object(d.b)({name:"expenses",initialState:{},reducers:{addExpense:function(e,t){var a=Object(b.uuid)();if(t.payload)e[a]=t.payload;else{var n={label:"",date:Date.now(),amount:0,frequency:"once"};e[a]=n}},bulkAddExpenses:function(e,t){t.payload.forEach((function(t){var a=Object(b.uuid)();e[a]=t}))},updateExpense:function(e,t){var a=e[t.payload.id],n=t.payload.expense;void 0!==n.amount&&(a.amount=n.amount),void 0!==n.date&&(a.date=n.date),void 0!==n.frequency&&(a.frequency=n.frequency),void 0!==n.label&&(a.label=n.label)},removeExpense:function(e,t){delete e[t.payload.id]}}}),f=j.actions,h=f.addExpense,p=f.bulkAddExpenses,g=f.updateExpense,v=f.removeExpense,x=function(e){return e.expenses},m=j.reducer,y=Object(d.b)({name:"wage",initialState:{},reducers:{addWage:function(e,t){var a=Object(b.uuid)();if(t.payload)e[a]=t.payload;else{var n={label:"",date:Date.now(),amount:0,frequency:"once"};e[a]=n}},bulkAddWages:function(e,t){t.payload.forEach((function(t){var a=Object(b.uuid)();e[a]=t}))},updateWage:function(e,t){var a=e[t.payload.id],n=t.payload.wage;void 0!==n.amount&&(a.amount=n.amount),void 0!==n.date&&(a.date=n.date),void 0!==n.frequency&&(a.frequency=n.frequency),void 0!==n.label&&(a.label=n.label)},removeWage:function(e,t){delete e[t.payload.id]}}}),O=y.actions,w=O.addWage,E=O.bulkAddWages,M=O.updateWage,k=O.removeWage,C=function(e){return e.wages},R=y.reducer;function T(e){var t=e[0],a=parseInt(e[1]),n=parseFloat(e[2]),r=e[3];return{label:t,date:isNaN(a)?-1:a,amount:isNaN(n)?-1:n,frequency:r}}var D=a(49),W=a(186),A=a(176),q=a(187),F=a(192),S=a(1);function I(e){return Object(S.jsx)(A.b,{dateAdapter:W.a,children:Object(S.jsx)(q.a,{label:e.label,inputFormat:"MM/dd/yyyy",value:e.value,onChange:function(t){t&&e.onChange(t.getTime())},renderInput:function(e){return Object(S.jsx)(F.a,Object(D.a)({},e))}})})}var Y=a(200),N=a(199),B=a(101),H=a.n(B),J=a(207),P=a(188),L=a(191);function X(e){return Object(S.jsxs)(N.a,{children:[Object(S.jsx)(Y.a,{className:"label-form",children:Object(S.jsx)(F.a,{variant:"outlined",value:e.data.label,onChange:function(t){return e.updateRow(e.uuid,{label:t.target.value})}})}),Object(S.jsx)(Y.a,{className:"label-date",children:Object(S.jsx)(I,{value:e.data.date,onChange:function(t){return e.updateRow(e.uuid,{date:t})}})}),Object(S.jsx)(Y.a,{children:Object(S.jsx)(F.a,{type:"number",inputProps:{pattern:"[0-9]*"},variant:"outlined",value:e.isExpensesRow?-1*e.data.amount:e.data.amount,onChange:function(t){var a=parseFloat(t.target.value);a&&e.updateRow(e.uuid,{amount:e.isExpensesRow?-1*a:a})}})}),Object(S.jsx)(Y.a,{children:Object(S.jsx)(J.a,{fullWidth:!0,children:Object(S.jsxs)(P.a,{value:e.data.frequency,onChange:function(t){return e.updateRow(e.uuid,{frequency:t.target.value})},children:[Object(S.jsx)(L.a,{value:"once",children:"Once"}),Object(S.jsx)(L.a,{value:"daily",children:"Daily"}),Object(S.jsx)(L.a,{value:"weekly",children:"Weekly"}),Object(S.jsx)(L.a,{value:"monthly",children:"Monthly"}),Object(S.jsx)(L.a,{value:"yearly",children:"Yearly"})]})})}),Object(S.jsx)(Y.a,{onClick:function(){return e.deleteRow(e.uuid)},children:Object(S.jsx)(H.a,{})})]})}var $=a(201),z=a(203),G=a(202),K=a(195),Q=a(103),U=a.n(Q),V=a(102);function Z(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{style:{textAlign:"center"},children:Object(S.jsxs)("h3",{children:[e.title," ",Object(S.jsx)(U.a,{onClick:function(){e.addRow()}})]})}),Object(S.jsx)("div",{style:{maxHeight:400,maxWidth:1e3,display:"block",margin:"0 auto",overflowX:"auto"},children:Object(S.jsxs)($.a,{stickyHeader:!0,children:[Object(S.jsx)(G.a,{children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(Y.a,{style:{width:150},children:"Label "}),Object(S.jsx)(Y.a,{style:{width:100},children:"Date"}),Object(S.jsx)(Y.a,{style:{width:80},children:"Amount"}),Object(S.jsx)(Y.a,{style:{width:100},children:"Frequency"}),Object(S.jsx)(Y.a,{style:{width:40}})]})}),Object(S.jsx)(z.a,{children:Object.entries(e.data).map((function(t){var a=t[0],n=t[1];return Object(S.jsx)(X,{uuid:a,data:n,isExpensesRow:e.isExpensesTable,addRow:e.addRow,updateRow:e.updateRow,deleteRow:e.deleteRow},a)}))})]})}),Object(S.jsx)("input",{type:"file",accept:".csv",onChange:function(t){if(t.target.files){var a=t.target.files[0],n=new FileReader;n.onload=function(t){var a,n=null===(a=t.target)||void 0===a?void 0:a.result;if(n){for(var r=Object(V.parse)(n.toString()),c=[],i=1;i<r.data.length;i++){var o=T(r.data[i]);c.push(o)}e.onImportComplete(c)}},n.readAsBinaryString(a)}}}),Object(S.jsx)(K.a,{onClick:function(){var t=e.title,a="data:text/csv;charset=utf-8,"+function(e){var t=e.map((function(e){var t=[];return t.push(e.label),t.push(e.date.toString()),t.push(e.amount.toString()),t.push(e.frequency),t}));return t.unshift(["label","date","amount","frequency"]),t}(Object.values(e.data)).map((function(e){return e.join(",")})).join("\n"),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download",t+".csv"),n.click(),n.remove()},children:"Export"})]})}a(133);var _=a(28),ee=new Date;ee.setDate(ee.getDate()+7);var te={expenses:[],wages:[],finances:[],aggregateOption:"day",startTimeMs:Date.now(),endTimeMs:ee.getTime()},ae=Object(d.b)({name:"chart",initialState:te,reducers:{setChartData:function(e,t){t.payload.expenses&&(e.expenses=t.payload.expenses),t.payload.finances&&(e.finances=t.payload.finances),t.payload.wages&&(e.wages=t.payload.wages)},setAgggregateOption:function(e,t){e.aggregateOption=t.payload},setStartTimeMs:function(e,t){e.startTimeMs=t.payload},setEndTimeMs:function(e,t){e.endTimeMs=t.payload}}}),ne=ae.actions,re=ne.setChartData,ce=ne.setAgggregateOption,ie=ne.setStartTimeMs,oe=ne.setEndTimeMs,se=function(e){return e.chart.expenses},ue=function(e){return e.chart.wages},le=function(e){return e.chart.finances},de=function(e){return e.chart.aggregateOption},be=function(e){return e.chart.startTimeMs},je=function(e){return e.chart.endTimeMs},fe=ae.reducer;function he(e,t){var a;switch(t){case"year":var n=new Date("1-1-1970"),r=Number.parseInt(e);n.setFullYear(r),a=n;break;case"month":case"day":a=new Date(e)}return a}function pe(e){var t=e+1;return t<10?"0"+t.toString():t.toString()}function ge(e,t,a){var n=new Date(e.date),r=[];if("once"!==e.frequency&&a>t)for(var c=n.getTime();!(c>a);)c>=t&&r.push({date:n.getTime(),amount:e.amount}),ve(e.frequency,n),c=n.getTime();else r.push({date:n.getTime(),amount:e.amount});return r}function ve(e,t){switch(e){case"daily":t.setDate(t.getDate()+1);break;case"weekly":t.setDate(t.getDate()+7);break;case"monthly":t.setMonth(t.getMonth()+1);break;case"yearly":t.setFullYear(t.getFullYear()+1)}}function xe(e,t){var a=new Map;return e.forEach((function(e){var n=function(e,t){switch(t){case"year":return""+e.getFullYear();case"month":return e.getFullYear()+"/"+pe(e.getMonth());case"day":return e.getFullYear()+"/"+pe(e.getMonth())+"/"+e.getDate()}}(new Date(e.date),t);if(n){var r=a.get(n),c=r||0;a.set(n,c+e.amount)}})),a}var me=a(193);_.a.register(_.b,_.c,_.d,_.f,_.e,_.g,_.h,_.i);var ye={type:"line",data:{datasets:[{label:"Wallet",fill:!0,backgroundColor:"rgb(150, 105, 25, 0.8)",borderColor:"rgb(150, 105, 25, 1)",data:[]},{label:"Income",fill:!0,backgroundColor:"rgba(63, 195, 128, 0.8)",borderColor:"rgba(63, 195, 128, 1)",data:[]},{label:"Expenses",fill:!0,backgroundColor:"rgba(255, 99, 132, 0.8)",borderColor:"rgba(255, 99, 132, 1)",data:[]}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Finances"}},scales:{x:{type:"time",distribution:"series"},y:{type:"linear"}}}};function Oe(){var e=u(),t=Object(n.useRef)(null),a=Object(n.useRef)(null),r=l(x),c=l(C),i=l(be),s=l(je),d=l(se),b=l(le),j=l(ue),f=l(de);return Object(n.useEffect)((function(){return t&&t.current&&(a.current=new _.a(t.current,ye)),function(){a&&a.current&&a.current.destroy()}}),[t]),Object(n.useEffect)((function(){if(a&&a.current){var e=b.map((function(e){return{x:new Date(e.date),y:e.amount}})),t=j.map((function(e){return{x:new Date(e.date),y:e.amount}})),n=d.map((function(e){return{x:new Date(e.date),y:e.amount}}));a.current.data.datasets[0].data=e,a.current.data.datasets[1].data=t,a.current.data.datasets[2].data=n,a.current.update()}return function(){}}),[d,j,b,f]),Object(n.useEffect)((function(){var t=function(e,t,a,n,r){var c=[],i=[];e.forEach((function(e){return c.push.apply(c,Object(o.a)(ge(e,a,n)))})),t.forEach((function(e){return i.push.apply(i,Object(o.a)(ge(e,a,n)))}));var s=xe(c,r),u=xe(i,r),l=[],d=[];s.forEach((function(e,t){var a=he(t,r);l.push({date:a.getTime(),amount:e})})),u.forEach((function(e,t){var a=he(t,r);d.push({date:a.getTime(),amount:e})})),l.sort((function(e,t){return e.date-t.date})),d.sort((function(e,t){return e.date-t.date}));var b=xe([].concat(l,d),r),j=[];b.forEach((function(e,t){var a=he(t,r);j.push({date:a.getTime(),amount:e})})),j.sort((function(e,t){return e.date-t.date}));var f=0;return j.forEach((function(e){f+=e.amount,e.amount=f})),{expenses:l,wages:d,finances:j}}(Object.values(r),Object.values(c),i,s,f);e(re({expenses:t.expenses,wages:t.wages,finances:t.finances}))}),[e,c,r,f,i,s]),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{style:{width:150,display:"inline-block"},children:Object(S.jsx)(I,{value:i,label:"Start Time",onChange:function(t){e(ie(t))}})}),Object(S.jsx)("div",{style:{width:150,display:"inline-block"},children:Object(S.jsx)(I,{value:s,label:"End Time",onChange:function(t){e(oe(t))}})}),Object(S.jsx)("div",{style:{display:"inline-block"},children:Object(S.jsxs)(J.a,{children:[Object(S.jsx)(me.a,{id:"aggregate-by-label",children:"Aggregate"}),Object(S.jsxs)(P.a,{labelId:"aggregate-by-label",id:"aggregate-by",label:"Aggregate",value:f,onChange:function(t){var a=t.target.value;e(ce(a))},children:[Object(S.jsx)(L.a,{value:"day",children:"Day"}),Object(S.jsx)(L.a,{value:"month",children:"Month"}),Object(S.jsx)(L.a,{value:"year",children:"Year"})]})]})}),Object(S.jsx)("div",{style:{maxWidth:1e3,margin:"0 auto"},children:Object(S.jsx)("div",{style:{display:"block"},children:Object(S.jsx)("canvas",{ref:t})})})]})}var we=function(){var e=l(x),t=l(C),a=l(be),n=l(je),r=u();function c(e){e<a&&r(ie(e)),e>n&&r(oe(e))}return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{style:{textAlign:"center",minWidth:700},children:Object(S.jsx)("h1",{children:"Financial Planner"})}),Object(S.jsx)("div",{style:{textAlign:"center",minWidth:700},children:Object(S.jsx)(Oe,{})}),Object(S.jsx)("div",{style:{textAlign:"center",minWidth:700},children:Object(S.jsx)(Z,{title:"Income",data:t,addRow:function(e){r(w(e||null))},updateRow:function(e,t){r(M({id:e,wage:t})),t.date&&c(t.date)},deleteRow:function(e){r(k({id:e}))},onImportComplete:function(e){var t=Object.values(e).map((function(e){return e.date})),c=Math.min.apply(Math,Object(o.a)(t)),i=Math.max.apply(Math,Object(o.a)(t));r(E(e)),r(ie(Math.min(a,c))),r(oe(Math.max(n,i)))},isExpensesTable:!1})}),Object(S.jsx)("div",{style:{textAlign:"center",minWidth:700},children:Object(S.jsx)(Z,{title:"Expenses",data:e,addRow:function(e){r(h(e||null))},updateRow:function(e,t){r(g({id:e,expense:t})),t.date&&c(t.date)},deleteRow:function(e){r(v({id:e}))},onImportComplete:function(e){var t=Object.values(e).map((function(e){return e.date})),c=Math.min.apply(Math,Object(o.a)(t)),i=Math.max.apply(Math,Object(o.a)(t));r(p(e)),r(ie(Math.min(a,c))),r(oe(Math.max(n,i)))},isExpensesTable:!0})}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{})]})},Ee=Object(d.a)({reducer:{expenses:m,wages:R,chart:fe}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(s.a,{store:Ee,children:Object(S.jsx)(we,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[135,1,2]]]);
//# sourceMappingURL=main.3a0c1727.chunk.js.map